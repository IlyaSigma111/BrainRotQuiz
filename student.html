<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—á–µ–Ω–∏–∫ - –û–ì–≠ –ö–∞—Ö—É—Ç</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body class="student-page">
    <div class="student-container">
        <!-- –≠–ö–†–ê–ù 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ -->
        <div id="joinScreen" class="screen active">
            <div class="join-screen">
                <div class="join-logo">üì±</div>
                <h2>–û–ì–≠ –ö–ê–•–£–¢</h2>
                <p class="join-subtitle">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ</p>
                
                <div class="join-form">
                    <div class="input-group">
                        <label for="playerNameInput">
                            <i class="fas fa-user"></i> –í–∞—à–µ –∏–º—è
                        </label>
                        <input type="text" id="playerNameInput" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" 
                               maxlength="20"
                               autocomplete="off">
                    </div>
                    
                    <div class="input-group">
                        <label for="gameCodeInput">
                            <i class="fas fa-key"></i> –ö–æ–¥ –∏–≥—Ä—ã
                        </label>
                        <input type="text" id="gameCodeInput" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –æ—Ç —É—á–∏—Ç–µ–ª—è"
                               maxlength="8"
                               pattern="[0-9]*"
                               inputmode="numeric"
                               autocomplete="off">
                        <small>–ö–æ–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—á–∏—Ç–µ–ª—å –Ω–∞ —Å–º–∞—Ä—Ç-–¥–æ—Å–∫–µ</small>
                    </div>
                    
                    <button onclick="joinGame()" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> –ü–û–î–ö–õ–Æ–ß–ò–¢–¨–°–Ø –ö –ò–ì–†–ï
                    </button>
                </div>
                
                <div class="join-hint">
                    <p><i class="fas fa-info-circle"></i> –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ–∂–∏–¥–∞–π—Ç–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã</p>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 2: –û–∂–∏–¥–∞–Ω–∏–µ -->
        <div id="waitingScreen" class="screen">
            <div class="waiting-screen">
                <div class="loader"></div>
                <h3>–û–ñ–ò–î–ê–ù–ò–ï –ò–ì–†–´</h3>
                <p class="waiting-message">–£—á–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç –≤–æ–ø—Ä–æ—Å...</p>
                
                <div class="player-info-card">
                    <div class="info-row">
                        <span>–ò–≥—Ä–æ–∫:</span>
                        <strong id="displayPlayerName">-</strong>
                    </div>
                    <div class="info-row">
                        <span>–ö–æ–º–Ω–∞—Ç–∞:</span>
                        <code id="displayGameCode">-</code>
                    </div>
                    <div class="info-row">
                        <span>–°—Ç–∞—Ç—É—Å:</span>
                        <span class="status-waiting">–û–∂–∏–¥–∞–Ω–∏–µ</span>
                    </div>
                </div>
                
                <div class="waiting-stats">
                    <p><i class="fas fa-users"></i> –ò–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ: <span id="roomPlayers">0</span></p>
                </div>
                
                <button onclick="disconnectGame()" class="btn btn-outline btn-small">
                    <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                </button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 3: –í–æ–ø—Ä–æ—Å -->
        <div id="questionScreen" class="screen">
            <div class="question-screen">
                <div class="question-header-student">
                    <div class="question-info">
                        <span class="question-type" id="questionTypeBadge">–û–ì–≠</span>
                        <span class="question-counter">–í–æ–ø—Ä–æ—Å <span id="currentQuestionNum">1</span>/30</span>
                    </div>
                    <div class="timer-student">
                        <div class="timer-label">–û–°–¢–ê–õ–û–°–¨</div>
                        <div id="studentTimer" class="timer-value">30</div>
                    </div>
                </div>
                
                <div class="question-content-student">
                    <div class="question-text-student" id="studentQuestionText">
                        –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...
                    </div>
                    
                    <div class="options-grid-student" id="optionsGrid">
                        <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </div>
                    
                    <div class="answer-status" id="answerStatus">
                        –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞
                    </div>
                </div>
                
                <div class="question-footer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 4: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <div id="resultScreen" class="screen">
            <div class="result-screen">
                <div class="result-header">
                    <h3><i class="fas fa-poll"></i> –†–ï–ó–£–õ–¨–¢–ê–¢ –û–¢–í–ï–¢–ê</h3>
                </div>
                
                <div class="result-card" id="resultCard">
                    <div class="result-loading">
                        <div class="loader"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...</p>
                    </div>
                </div>
                
                <div class="result-message">
                    <p>–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å —Å–∫–æ—Ä–æ –Ω–∞—á–Ω–µ—Ç—Å—è</p>
                    <div class="next-countdown">
                        <span id="nextCountdown">5</span> —Å–µ–∫.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="student.js"></script>

    <style>
        /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É—á–µ–Ω–∏–∫–∞ */
        .student-container {
            width: 100%;
            max-width: 500px;
            min-height: 100vh;
            background: #1e293b;
            border-radius: 0;
        }
        
        @media (min-width: 768px) {
            .student-container {
                border-radius: 20px;
                min-height: 90vh;
                margin: 20px auto;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            }
        }
        
        .screen {
            display: none;
            height: 100%;
        }
        
        .screen.active {
            display: block;
        }
        
        .join-screen, .waiting-screen, .result-screen {
            padding: 30px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .question-screen {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .join-subtitle {
            color: #94a3b8;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .btn-block {
            width: 100%;
            margin-top: 20px;
        }
        
        .join-hint {
            margin-top: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            text-align: center;
            color: #94a3b8;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .status-waiting {
            color: #f59e0b;
        }
        
        .waiting-stats {
            margin: 20px 0;
            text-align: center;
        }
        
        .timer-student {
            text-align: center;
        }
        
        .timer-label {
            font-size: 0.8rem;
            color: #94a3b8;
        }
        
        .timer-value {
            font-size: 2rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            color: #10b981;
        }
        
        .question-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .question-type {
            background: #4361ee;
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .question-footer {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4361ee, #3a0ca3);
            width: 0%;
            transition: width 1s linear;
        }
        
        .next-countdown {
            display: inline-block;
            padding: 5px 15px;
            background: #4361ee;
            color: white;
            border-radius: 20px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .result-loading {
            text-align: center;
            padding: 40px;
        }
    </style>
</body>
</html>
